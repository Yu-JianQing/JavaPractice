package SanShuJu_3;

import java.util.HashMap;
import java.util.Map;

public class VoteService {//服务器返回信息使用
	private Map<Integer, Long> result=new HashMap<Integer, Long>();//存放id 和 获得的投票数
	
	public VoteMsg handleRequest(VoteMsg msg){
		if(msg.isResponse())
			return msg;
		
		msg.setResponse(true);
		
		int candidate=msg.getCandidateID();
		Long count=result.get(candidate);
		
		if(count==null)
			count=0L;
		
		if(!msg.isQuerry())
			result.put(candidate, ++count);
		
		msg.setVoteCount(count);
		
		return msg;
	}
}
